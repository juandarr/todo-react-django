<!-- templates/registration/password_reset_form.html -->
{% extends 'base.html' %}

{% block title %}Forgot Your Password?{% endblock %}

{% block content %}
<div class="flex justify-center items-center">
    <div
        class="flex flex-col items-center justify-center bg-white w-fit rounded-xl mt-10 m-4 p-8">

        <h1 class="text-xl mb-2 font-bold self-start">Forgot your password?</h1>
        <p class="mb-8 text-base">Enter your email address below, and we'll
            email
            instructions for setting a new one.</p>
        <form class="admin-form" method="post" id="password-reset-form">
            {% csrf_token %}
            <div class="mb-4">
                <label for="{{ form.username.id_for_label }}"
                    class="block text-gray-700 font-semibold">Email:</label>
                {{ form.email }}
            </div>
            <div class="flex justify-center">
                <button
                    class="mt-2 mb-4 h-9 bg-cyan-500 p-3 w-fit rounded-xl font-semibold text-lg hover:bg-cyan-600 flex justify-center items-center disabled:bg-cyan-200"
                    type="submit" id="passwordResetBtn">
                    <span class='loader invisible'
                        id="passwordResetBtnSpinner"></span>
                    <span class='block' id="passwordResetBtnLabel">
                        Send me instructions!
                    </span>
                </button>
            </div>
        </form>
    </div>
</div>

<script>
    function handlePasswordResetFormSubmit() {
        // Disable button
        document.getElementById('passwordResetBtn').disabled = true;
        // Hidde button label
        document.getElementById('passwordResetBtnLabel').classList.toggle('invisible');
        // Show loading indicator
        document.getElementById('passwordResetBtnSpinner').classList.toggle('invisible');
    }

    document.querySelector('#password-reset-form').addEventListener('submit', function (event) {
        handlePasswordResetFormSubmit();
    });
</script>
{% endblock %}